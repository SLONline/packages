{% extends 'Plugin/_box.html.twig' %}

{% set box_type = 'box-warning' %}

{% block title %}Bitbucket{% endblock %}

{% block body %}
  <div class="form-group" id="bitbucket_plugin">
    Configure Bitbucket settings for this remote
  </div>
  <div class="form-group">
    <label for="bitbucket_key">OAuth key</label>
    <input type="text" name="bitbucket_key" value="{{ config.Key }}" placeholder="Enter Key" id="bitbucket_key" class="form-control" required>
  </div>
  <div class="form-group">
    <label for="bitbucket_secret_key">OAuth secret key</label>
    <input type="text" name="bitbucket_secret_key" value="{{ config.SecretKey }}" placeholder="Enter Secret Key" id="bitbucket_secret_key" class="form-control" required>
  </div>
  <div class="form-group">
    <label for="bitbucket_account">Account name</label>
    <input type="text" name="bitbucket_account" value="{{ config.Account }}" placeholder="Enter Account Name" id="bitbucket_account" class="form-control" required>
  </div>
{% endblock %}

{% block javascripts %}
  <script type="text/javascript">
    $(function() {
      var $adapter = $(document.getElementById('adapter'));
      var $pluginBox = $(document.getElementById('bitbucket_plugin')).closest('.plugin-box');
      var $required = $('[required]', $pluginBox);

      $adapter.change(function() {
        if ($(this).val() === 'Bitbucket') {
          $pluginBox.fadeIn();
          $required.prop('required', true);
        } else {
          $pluginBox.hide();
          $required.prop('required', false);
        }
      }).change();
    });
  </script>
{% endblock %}
